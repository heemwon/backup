<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
    <base href="../../../" />
    <link rel="icon" href="assets/favicon.ico" />
    <script src="assets/js/ie.js"></script>
    <link rel="stylesheet" href="assets/css/library/choices.min.css" />
    <link rel="stylesheet" href="assets/css/reset.css" />
    <link rel="stylesheet" href="assets/css/common.css" />
    <link rel="stylesheet" href="assets/css/style.css" />
    <title>Samsung Cloud Platform</title>
  </head>
  <body>
    <div class="wrap tech-guide">
      <!-- 3depth 메뉴가 있을 시 header태그에 subpage 듀얼클래스를 추가해주세요. -->
      <div id="header-template" class="header-include subpage"></div>
      <article class="content">
        <div class="hero-sub">
          <div class="content">
            <div class="sub-content">
              <h2 class="font-heading1">DB Service의 고가용성 Feature</h2>
              <a
                href="javascript:;"
                target="_blank"
                class="btn-border large"
                ><i class="ico-link"></i><span class="i18n-inherit" data-i18n="button.button_3"></span></a
              >
            </div>
          </div>
          <div class="visual-tab">
            <nav>
              <ul class="tablist">
                <li><a href="javascript:;" data-scroll-anchor data-i18n="category.category_18"></a></li>
                <li><a href="javascript:;" data-scroll-anchor>HYPERVISOR CLUSTERING을 통한 가상 서버 HA</a></li>
                <li><a href="javascript:;" data-scroll-anchor>이중화 솔루션(PACEMAKER) 리소스 관리 기능</a></li>
                <li><a href="javascript:;" data-scroll-anchor>PACEMAKER 구성 요소</a></li>
                <li><a href="javascript:;" data-scroll-anchor>PACEMAKER DB 리소스 구성 옵션</a></li>
                <li><a href="javascript:;" data-scroll-anchor>PACEMAKER DB 리소스 테스트 결과</a></li>
              </ul>
              <span class="progress-bar"></span>
            </nav>
          </div>
        </div>
        <div class="right-layout" data-scroll-section>
          <div class="left-content">
            <div class="detail-content">
              <h3 class="font-heading2" data-i18n="category.category_18"></h3>
              <div class="column-box">
                본 문서는 클라우드 환경에서 단일 가상 서버로 구성된 DB의 가용성을 높이기 위해 DB Service에서 제공하는 고가용성 Feature중AutoRestart 기능에 대한 내용을 다루고 있습니다. <br />
                AutoRestart 기능은 Hypervisor Clustering을 통한 가상 서버의 고가용성(HA, High Availability) 기능과  이중화 솔루션인 Pacemaker의 리소스 관리 기능을 활용하여 단일 DB 서버의 가용성을 높여줍니다.
              </div>
            </div>
          </div>
        </div>
        <div class="right-layout" data-scroll-section>
          <div class="left-content">
            <div class="detail-content">
              <h3 class="font-heading2">Hypervisor Clustering을 통한 가상 서버 HA</h3>
              <div class="column-box">
                가상 서버는 Hypervisor에서 실행되고 하드웨어 리소스는 Hypervisor를 통해 가상 서버에 할당됩니다. Hypervisor에 장애가 발생하거나 물리적 Host 서버에 장애가 발생하게 되면 Hypervisor 상에서 실행 중인 가상 서버에 장애가 발생하게 됩니다.
                <figure class="margin-bottom">
                  <img src="assets/images/img/img_techguide4_01.jpg" alt="">
                  <figcaption>Figure 1. Hypervisor Clustering을 통한 가상 서버 HA</figcaption>
                </figure>
                이를 방지하기 위한 방법으로 서로 다른 물리적 Host 서버에 Hypervisor를 설치하고 HA를 위한 Hypervisor Cluster를 구성합니다. 이를 통해 특정 Hypervisor 또는 물리적 Host 서버에 문제가 발생할 경우, 해당 Hypervisor에서 실행 중인 가상 서버를 다른 Hypervisor 또는 물리적 Host 서버로 이동하여 서비스를 계속 제공할 수 있습니다. 
              </div>
            </div>
          </div>
        </div>
        <div class="right-layout" data-scroll-section>
          <div class="left-content">
            <div class="detail-content">
              <h3 class="font-heading2">이중화 솔루션의 리소스 관리</h3>
              <div class="column-box">
                앞서 설명한 Hypervisor Clustering을 통한 가상 서버 HA는 하드웨어 수준의 장애에 대해 가상 서버 자체의 가용성을 높이는 방법으로 가상 서버 내의 OS 및 DB를 포함한 응용 프로그램에 대한 처리는 불가능합니다. 특히 가상 서버 이동 시에는 OS 재기동이 발생하는데, OS 부팅 시에 DB를 포함한 응용 프로그램의 자동 시작이 별도로 설정되어 있지 않다면 서비스가 제공되지 않을 수 있습니다.<br />
                <br />
                이를 보완하기 위한 방법으로 이중화 솔루션인 Pacemaker를 활용하여 단일 노드 클러스터를 구성하고 리소스 관리 기능에 DB를 리소스로 등록하여 모니터링, 시작, 중지, 재시작 등의 관리를 하도록 합니다.<br /><br />
                OS 부팅 시에 자동으로 DB 리소스 기동이 가능하며, DB 리소스의 경우에는 프로세스 모니터링 및 SQL 쿼리 수준의 모니터링도 가능하여 DB 장애 상황을 감지하고 재기동이 수행됩니다.
              </div>
            </div>
          </div>
        </div>
        <div class="right-layout" data-scroll-section>
          <div class="left-content">
            <div class="detail-content">
              <h3 class="font-heading2">Pacemaker 구성 요소</h3>
              <div class="column-box">
                리소스 관리 기능을 하는 Pacemaker의 주요 구성 요소는 다음과 같습니다.
                <figure class="margin-bottom">
                  <img src="assets/images/img/img_techguide4_02.jpg" alt="" />
                  <figcaption>Figure 2. Pacemaker 구성 요소</figcaption>
                </figure>
                <ol class="list-type4 bullet-number">
                  <li>
                    <p class="desc">CRMd (Cluster Resource Manager): Main Controller Process 역할, 모든 리소스 작업을 라우팅하며 Resource Allocation Layer 내의 모든 동작 처리</p>
                  </li>
                  <li>
                    <p class="desc">RMd (Local Resource Manager): CRMd와 Resource Agent 사이의 인터페이스 역할</p>
                  </li>
                  <li>
                    <p class="desc">
                      Resource Agent: 클러스터 리소스를 위해 정의된 규격화된 인터페이스, 기본적으로 start / stop / monitor와 같은 스크립트를 실행하며 여러 응용프로그램에 맞는 여러 Agent가 존재
                    </p>
                  </li>
                  <li>
                    <p class="desc">
                      CIB(Cluster Information Base): 설정 정보 관리, XML 파일로 설정
                    </p>
                  </li>
                  <li>
                    <p class="desc">
                      PEngine(Policy Engine): 정책을 관리하고 리소스 전환 시 의존성 확인
                    </p>
                  </li>
                  <li>
                    <p class="desc">
                      STONITHd: Fencing Agent
                    </p>
                  </li>
                  <li>
                    <p class="desc">
                      Corosync: 클러스터 환경에서 사용되는 Messaging 시스템으로 Pacemaker 작동에 필요한 기본 인프라
                    </p>
                  </li>
                </ol>
              </div>
            </div>
          </div>
        </div>
        <div class="right-layout" data-scroll-section>
          <div class="left-content">
            <div class="detail-content">
              <h3 class="font-heading2">Pacemaker DB 리소스 구성 옵션</h3>
              <div class="column-box">
                Pacemaker의 리소스를 구성하는 옵션은 각 리소스 에이전트에 따라 달라집니다. 대표적인 오픈소스DB인 MySQL과 PostgreSQL의 리소스 구성 옵션은 다음과 같습니다.
                <figure class="margin-bottom">
                  <img src="assets/images/img/img_techguide4_03.jpg" alt="" />
                  <figcaption>Figure 3. MySQL DB 리소스 옵션</figcaption>
                </figure>
                <figure class="margin-bottom">
                  <img src="assets/images/img/img_techguide4_04.jpg" alt="" />
                  <figcaption>Figure 4. PostgreSQL DB 리소스 옵션</figcaption>
                </figure>
              </div>
            </div>
          </div>
        </div>
        <div class="right-layout" data-scroll-section>
          <div class="left-content">
            <div class="detail-content">
              <h3 class="font-heading2">Pacemaker DB 리소스 테스트 결과</h3>
              <div class="column-box">
                Pacemaker를 활용하여 단일 노드 클러스터를 구성하여 DB 리소스를 등록한 예시 구성은 다음과 같습니다.
                <figure class="margin-bottom">
                  <img src="assets/images/img/img_techguide4_05.jpg" alt="" />
                  <img src="assets/images/img/img_techguide4_06.jpg" alt="" />
                  <figcaption>Figure 5. Pacemaker 구성 예시</figcaption>
                </figure>
                DB 리소스에 대한 테스트를 수행하고 제대로 동작하는지를 확인합니다.<br />
                <span class="sub-depth-title">Test Case : DB 프로세스 Down 시 DB 프로세스 재기동 검증</span>
                <figure class="margin-bottom">
                  <img src="assets/images/img/img_techguide4_07.jpg" alt="" />
                  <figcaption>Figure 6. DB 프로세스 Down시 재기동 테스트</figcaption>
                </figure>
              </div>
            </div>
          </div>
        </div>
        <div class="right-layout">
          <div class="left-content">
            <div class="detail-content">
              <strong class="sub-title margin-bottom">고려사항</strong>
              <div class="column-box">
                Hypervisor Clustering을 활용한 가상 서버 HA에 의한 Failover(10분 이상)는 두 개 이상의 노드로 구성하는 일반적인 어플리케이션 HA를 통한 Failover(1~2분 이내)에 비해 Failover에 더욱 많은 시간이 소요됩니다. 뿐만 아니라 스토리지, 네트워크 장애에 대한 대응에는 제한이 있을 수 있습니다. 따라서 각 시스템에서 요구되는 가용성 수준을 분석하고 그에 맞는 적절한 고가용성 구성에 대한 선택이 필요합니다.
                <br /><br />
                이상으로 클라우드 환경에서 단일 가상 서버로 구성된 DB의 가용성을 높이기 위한 DB Service의 AutoRestart 기능에 대하여 살펴봤습니다.
              </div>
            </div>
          </div>
        </div>
      </article>
      <div id="footer-template"></div>
    </div>
    <script src="assets/js/library/jquery.min.js"></script>
    <script src="assets/js/library/swiper-bundle.min.js"></script>
    <script src="assets/js/library/scroll-lock.min.js"></script>
    <script src="assets/js/library/ScrollMagic.min.js"></script>
    <script src="assets/js/library/choices.min.js"></script>
    <script src="assets/js/library/i18next-1.11.2.min.js"></script>

    <script src="assets/js/common.js"></script>
    <script src="assets/js/i18n.js"></script>
    <script src="assets/js/initialize.js"></script>
    <script src="assets/js/pub.js"></script>
  </body>
</html>